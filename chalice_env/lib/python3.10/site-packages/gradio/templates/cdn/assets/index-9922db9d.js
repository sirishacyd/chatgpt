import{S as de,i as he,s as ge,H as K,G as q,C as g,P as E,g as B,J as I,F as le,q as M,a4 as me,y as oe,b as G,I as $,K as be,f as sl,ab as rl,a as te,e as V,E as L,m as W,k as ne,p as C,l as Q,t as S,o as X,n as Z,r as He,B as x,W as U,z as ce,A as _e,x as il,a2 as ul,ag as Ae,h as fl,j as ol}from"./index-f2aa5b83.js";import{U as cl}from"./Upload-42181549.js";import{B as Oe}from"./Empty.svelte_svelte_type_style_lang-28ad0ce0.js";/* empty css                                                    */import"./ModifyUpload.svelte_svelte_type_style_lang-886b042e.js";import{d as _l}from"./dsv-576afacd.js";var je=Object.prototype.hasOwnProperty;function ae(a,e){var l,n;if(a===e)return!0;if(a&&e&&(l=a.constructor)===e.constructor){if(l===Date)return a.getTime()===e.getTime();if(l===RegExp)return a.toString()===e.toString();if(l===Array){if((n=a.length)===e.length)for(;n--&&ae(a[n],e[n]););return n===-1}if(!l||typeof a=="object"){n=0;for(l in a)if(je.call(a,l)&&++n&&!je.call(e,l)||!(l in e)||!ae(a[l],e[l]))return!1;return Object.keys(e).length===n}}return a!==a&&e!==e}function De(a){let e,l,n;return{c(){e=q("input"),g(e,"tabindex","-1"),e.value=a[0],g(e,"class","svelte-q8uklq"),E(e,"header",a[3])},m(t,r){B(t,e,r),a[7](e),l||(n=[I(e,"keydown",a[6]),I(e,"blur",a[8])],l=!0)},p(t,r){r&1&&e.value!==t[0]&&(e.value=t[0]),r&8&&E(e,"header",t[3])},d(t){t&&M(e),a[7](null),l=!1,me(n)}}}function dl(a){let e;return{c(){e=$(a[0])},m(l,n){B(l,e,n)},p(l,n){n&1&&be(e,l[0])},d(l){l&&M(e)}}}function hl(a){let e,l;return{c(){e=new rl(!1),l=sl(),e.a=l},m(n,t){e.m(a[0],n,t),B(n,l,t)},p(n,t){t&1&&e.p(n[0])},d(n){n&&M(l),n&&e.d()}}}function gl(a){let e,l,n,t,r=a[2]&&De(a);function c(i,o){return i[4]==="markdown"||i[4]==="html"?hl:dl}let _=c(a),m=_(a);return{c(){r&&r.c(),e=K(),l=q("span"),m.c(),g(l,"tabindex","-1"),g(l,"role","button"),g(l,"class","svelte-q8uklq"),E(l,"edit",a[2])},m(i,o){r&&r.m(i,o),B(i,e,o),B(i,l,o),m.m(l,null),n||(t=I(l,"dblclick",a[5]),n=!0)},p(i,[o]){i[2]?r?r.p(i,o):(r=De(i),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),_===(_=c(i))&&m?m.p(i,o):(m.d(1),m=_(i),m&&(m.c(),m.m(l,null))),o&4&&E(l,"edit",i[2])},i:le,o:le,d(i){r&&r.d(i),i&&M(e),i&&M(l),m.d(),n=!1,t()}}}function ml(a,e,l){let{edit:n}=e,{value:t=""}=e,{el:r}=e,{header:c=!1}=e,{datatype:_="str"}=e;function m(u){oe.call(this,a,u)}function i(u){oe.call(this,a,u)}function o(u){G[u?"unshift":"push"](()=>{r=u,l(1,r)})}const j=({currentTarget:u})=>{l(0,t=u.value),u.setAttribute("tabindex","-1")};return a.$$set=u=>{"edit"in u&&l(2,n=u.edit),"value"in u&&l(0,t=u.value),"el"in u&&l(1,r=u.el),"header"in u&&l(3,c=u.header),"datatype"in u&&l(4,_=u.datatype)},[t,r,n,c,_,m,i,o,j]}class Ne extends de{constructor(e){super(),he(this,e,ml,gl,ge,{edit:2,value:0,el:1,header:3,datatype:4})}}function Ee(a,e,l){const n=a.slice();return n[52]=e[l],n[54]=l,n}function Le(a,e,l){const n=a.slice();return n[55]=e[l].value,n[56]=e[l].id,n[57]=e,n[58]=l,n}function qe(a,e,l){const n=a.slice();return n[55]=e[l].value,n[56]=e[l].id,n[59]=e,n[54]=l,n}function Be(a){let e,l;return{c(){e=q("p"),l=$(a[1]),g(e,"class","svelte-8hrj8a")},m(n,t){B(n,e,t),L(e,l)},p(n,t){t[0]&2&&be(l,n[1])},d(n){n&&M(e)}}}function Me(a){let e,l;return{c(){e=q("caption"),l=$(a[1]),g(e,"class","sr-only")},m(n,t){B(n,e,t),L(e,l)},p(n,t){t[0]&2&&be(l,n[1])},d(n){n&&M(e)}}}function Ce(a,e){let l,n,t,r,c,_,m,i,o,j,u,h=e[56],f,A,F;function b(z){e[30](z,e[56])}function k(){return e[31](e[56])}let p={value:e[55],edit:e[13]===e[56],header:!0};e[10][e[56]].input!==void 0&&(p.el=e[10][e[56]].input),t=new Ne({props:p}),G.push(()=>te(t,"el",b)),t.$on("keydown",e[21]),t.$on("dblclick",k);function w(){return e[32](e[54])}const T=()=>e[33](l,h),N=()=>e[33](null,h);return{key:a,first:null,c(){l=q("th"),n=q("div"),V(t.$$.fragment),c=K(),_=q("div"),m=x("svg"),i=x("path"),j=K(),g(i,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),g(m,"width","1em"),g(m,"height","1em"),g(m,"viewBox","0 0 9 7"),g(m,"fill","none"),g(m,"xmlns","http://www.w3.org/2000/svg"),g(m,"class","svelte-8hrj8a"),g(_,"class",o="sort-button "+e[11]+" svelte-8hrj8a"),E(_,"sorted",e[12]===e[54]),E(_,"des",e[12]===e[54]&&e[11]==="des"),g(n,"class","cell-wrap svelte-8hrj8a"),g(l,"aria-sort",u=e[15](e[55],e[12],e[11])),g(l,"class","svelte-8hrj8a"),E(l,"editing",e[13]===e[56]),this.first=l},m(z,R){B(z,l,R),L(l,n),W(t,n,null),L(n,c),L(n,_),L(_,m),L(m,i),L(l,j),T(),f=!0,A||(F=I(_,"click",w),A=!0)},p(z,R){e=z;const P={};R[0]&256&&(P.value=e[55]),R[0]&8448&&(P.edit=e[13]===e[56]),!r&&R[0]&1280&&(r=!0,P.el=e[10][e[56]].input,ne(()=>r=!1)),t.$set(P),(!f||R[0]&2048&&o!==(o="sort-button "+e[11]+" svelte-8hrj8a"))&&g(_,"class",o),(!f||R[0]&6400)&&E(_,"sorted",e[12]===e[54]),(!f||R[0]&6400)&&E(_,"des",e[12]===e[54]&&e[11]==="des"),(!f||R[0]&6400&&u!==(u=e[15](e[55],e[12],e[11])))&&g(l,"aria-sort",u),h!==e[56]&&(N(),h=e[56],T()),(!f||R[0]&8448)&&E(l,"editing",e[13]===e[56])},i(z){f||(C(t.$$.fragment,z),f=!0)},o(z){S(t.$$.fragment,z),f=!1},d(z){z&&M(l),Z(t),N(),A=!1,F()}}}function Te(a,e){let l,n,t,r,c,_=e[56],m,i,o;function j(w){e[34](w,e[55],e[57],e[58])}function u(w){e[35](w,e[56])}let h={edit:e[6]===e[56],datatype:Array.isArray(e[0])?e[0][e[58]]:e[0]};e[55]!==void 0&&(h.value=e[55]),e[10][e[56]].input!==void 0&&(h.el=e[10][e[56]].input),t=new Ne({props:h}),G.push(()=>te(t,"value",j)),G.push(()=>te(t,"el",u));const f=()=>e[36](l,_),A=()=>e[36](null,_);function F(){return e[37](e[56])}function b(){return e[38](e[56])}function k(){return e[39](e[56])}function p(...w){return e[40](e[54],e[58],e[56],...w)}return{key:a,first:null,c(){l=q("td"),n=q("div"),V(t.$$.fragment),g(n,"class","cell-wrap svelte-8hrj8a"),E(n,"border-transparent",e[7]!==e[56]),g(l,"tabindex","0"),g(l,"class","svelte-8hrj8a"),this.first=l},m(w,T){B(w,l,T),L(l,n),W(t,n,null),f(),m=!0,i||(o=[I(l,"touchstart",F,{passive:!0}),I(l,"click",b),I(l,"dblclick",k),I(l,"keydown",p)],i=!0)},p(w,T){e=w;const N={};T[0]&576&&(N.edit=e[6]===e[56]),T[0]&513&&(N.datatype=Array.isArray(e[0])?e[0][e[58]]:e[0]),!r&&T[0]&512&&(r=!0,N.value=e[55],ne(()=>r=!1)),!c&&T[0]&1536&&(c=!0,N.el=e[10][e[56]].input,ne(()=>c=!1)),t.$set(N),(!m||T[0]&640)&&E(n,"border-transparent",e[7]!==e[56]),_!==e[56]&&(A(),_=e[56],f())},i(w){m||(C(t.$$.fragment,w),m=!0)},o(w){S(t.$$.fragment,w),m=!1},d(w){w&&M(l),Z(t),A(),i=!1,me(o)}}}function Fe(a,e){let l,n=[],t=new Map,r,c,_=e[52];const m=i=>i[56];for(let i=0;i<_.length;i+=1){let o=Le(e,_,i),j=m(o);t.set(j,n[i]=Te(j,o))}return{key:a,first:null,c(){l=q("tr");for(let i=0;i<n.length;i+=1)n[i].c();r=K(),g(l,"class","svelte-8hrj8a"),this.first=l},m(i,o){B(i,l,o);for(let j=0;j<n.length;j+=1)n[j]&&n[j].m(l,null);L(l,r),c=!0},p(i,o){e=i,o[0]&460481&&(_=e[52],Q(),n=ce(n,o,m,1,e,_,t,l,_e,Te,r,Le),X())},i(i){if(!c){for(let o=0;o<_.length;o+=1)C(n[o]);c=!0}},o(i){for(let o=0;o<n.length;o+=1)S(n[o]);c=!1},d(i){i&&M(l);for(let o=0;o<n.length;o+=1)n[o].d()}}}function bl(a){let e,l,n,t,r=[],c=new Map,_,m,i=[],o=new Map,j,u=a[1]&&a[1].length!==0&&Me(a),h=a[8];const f=b=>b[56];for(let b=0;b<h.length;b+=1){let k=qe(a,h,b),p=f(k);c.set(p,r[b]=Ce(p,k))}let A=a[9];const F=b=>b[52];for(let b=0;b<A.length;b+=1){let k=Ee(a,A,b),p=F(k);o.set(p,i[b]=Fe(p,k))}return{c(){e=q("table"),u&&u.c(),l=K(),n=q("thead"),t=q("tr");for(let b=0;b<r.length;b+=1)r[b].c();_=K(),m=q("tbody");for(let b=0;b<i.length;b+=1)i[b].c();g(t,"class","svelte-8hrj8a"),g(n,"class","svelte-8hrj8a"),g(m,"class","svelte-8hrj8a"),g(e,"class","svelte-8hrj8a"),E(e,"dragging",a[14])},m(b,k){B(b,e,k),u&&u.m(e,null),L(e,l),L(e,n),L(n,t);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(t,null);L(e,_),L(e,m);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(m,null);j=!0},p(b,k){b[1]&&b[1].length!==0?u?u.p(b,k):(u=Me(b),u.c(),u.m(e,l)):u&&(u.d(1),u=null),k[0]&3718400&&(h=b[8],Q(),r=ce(r,k,f,1,b,h,c,t,_e,Ce,null,qe),X()),k[0]&460481&&(A=b[9],Q(),i=ce(i,k,F,1,b,A,o,m,_e,Fe,null,Ee),X()),(!j||k[0]&16384)&&E(e,"dragging",b[14])},i(b){if(!j){for(let k=0;k<h.length;k+=1)C(r[k]);for(let k=0;k<A.length;k+=1)C(i[k]);j=!0}},o(b){for(let k=0;k<r.length;k+=1)S(r[k]);for(let k=0;k<i.length;k+=1)S(i[k]);j=!1},d(b){b&&M(e),u&&u.d();for(let k=0;k<r.length;k+=1)r[k].d();for(let k=0;k<i.length;k+=1)i[k].d()}}}function Re(a){let e,l,n,t=a[3][1]==="dynamic"&&Se(a),r=a[2][1]==="dynamic"&&ze(a);return{c(){e=q("div"),t&&t.c(),l=K(),r&&r.c(),g(e,"class","controls-wrap svelte-8hrj8a")},m(c,_){B(c,e,_),t&&t.m(e,null),L(e,l),r&&r.m(e,null),n=!0},p(c,_){c[3][1]==="dynamic"?t?(t.p(c,_),_[0]&8&&C(t,1)):(t=Se(c),t.c(),C(t,1),t.m(e,l)):t&&(Q(),S(t,1,1,()=>{t=null}),X()),c[2][1]==="dynamic"?r?(r.p(c,_),_[0]&4&&C(r,1)):(r=ze(c),r.c(),C(r,1),r.m(e,null)):r&&(Q(),S(r,1,1,()=>{r=null}),X())},i(c){n||(C(t),C(r),n=!0)},o(c){S(t),S(r),n=!1},d(c){c&&M(e),t&&t.d(),r&&r.d()}}}function Se(a){let e,l,n;return l=new Oe({props:{variant:"secondary",size:"sm",$$slots:{default:[pl]},$$scope:{ctx:a}}}),l.$on("click",a[43]),{c(){e=q("span"),V(l.$$.fragment),g(e,"class","button-wrap svelte-8hrj8a")},m(t,r){B(t,e,r),W(l,e,null),n=!0},p(t,r){const c={};r[1]&536870912&&(c.$$scope={dirty:r,ctx:t}),l.$set(c)},i(t){n||(C(l.$$.fragment,t),n=!0)},o(t){S(l.$$.fragment,t),n=!1},d(t){t&&M(e),Z(l)}}}function pl(a){let e,l,n;return{c(){e=x("svg"),l=x("path"),n=$(`
						New row`),g(l,"fill","currentColor"),g(l,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(e,"aria-hidden","true"),g(e,"role","img"),g(e,"width","1em"),g(e,"height","1em"),g(e,"preserveAspectRatio","xMidYMid meet"),g(e,"viewBox","0 0 32 32"),g(e,"class","svelte-8hrj8a")},m(t,r){B(t,e,r),L(e,l),B(t,n,r)},p:le,d(t){t&&M(e),t&&M(n)}}}function ze(a){let e,l,n;return l=new Oe({props:{variant:"secondary",size:"sm",$$slots:{default:[wl]},$$scope:{ctx:a}}}),l.$on("click",a[23]),{c(){e=q("span"),V(l.$$.fragment),g(e,"class","button-wrap svelte-8hrj8a")},m(t,r){B(t,e,r),W(l,e,null),n=!0},p(t,r){const c={};r[1]&536870912&&(c.$$scope={dirty:r,ctx:t}),l.$set(c)},i(t){n||(C(l.$$.fragment,t),n=!0)},o(t){S(l.$$.fragment,t),n=!1},d(t){t&&M(e),Z(l)}}}function wl(a){let e,l,n;return{c(){e=x("svg"),l=x("path"),n=$(`
						New column`),g(l,"fill","currentColor"),g(l,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(e,"aria-hidden","true"),g(e,"role","img"),g(e,"width","1em"),g(e,"height","1em"),g(e,"preserveAspectRatio","xMidYMid meet"),g(e,"viewBox","0 0 32 32"),g(e,"class","svelte-8hrj8a")},m(t,r){B(t,e,r),L(e,l),B(t,n,r)},p:le,d(t){t&&M(e),t&&M(n)}}}function kl(a){let e,l,n,t,r,c,_,m,i,o=a[1]&&a[1].length!==0&&Be(a);function j(f){a[41](f)}let u={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[bl]},$$scope:{ctx:a}};a[14]!==void 0&&(u.dragging=a[14]),t=new cl({props:u}),G.push(()=>te(t,"dragging",j)),t.$on("load",a[42]);let h=a[4]&&Re(a);return{c(){e=q("div"),o&&o.c(),l=K(),n=q("div"),V(t.$$.fragment),c=K(),h&&h.c(),g(n,"class","table-wrap scroll-hide svelte-8hrj8a"),E(n,"dragging",a[14]),E(n,"no-wrap",!a[5]),g(e,"class","svelte-8hrj8a"),E(e,"label",a[1]&&a[1].length!==0)},m(f,A){B(f,e,A),o&&o.m(e,null),L(e,l),L(e,n),W(t,n,null),L(e,c),h&&h.m(e,null),_=!0,m||(i=[I(window,"click",a[24]),I(window,"touchstart",a[24])],m=!0)},p(f,A){f[1]&&f[1].length!==0?o?o.p(f,A):(o=Be(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null);const F={};A[0]&32707|A[1]&536870912&&(F.$$scope={dirty:A,ctx:f}),!r&&A[0]&16384&&(r=!0,F.dragging=f[14],ne(()=>r=!1)),t.$set(F),(!_||A[0]&16384)&&E(n,"dragging",f[14]),(!_||A[0]&32)&&E(n,"no-wrap",!f[5]),f[4]?h?(h.p(f,A),A[0]&16&&C(h,1)):(h=Re(f),h.c(),C(h,1),h.m(e,null)):h&&(Q(),S(h,1,1,()=>{h=null}),X()),(!_||A[0]&2)&&E(e,"label",f[1]&&f[1].length!==0)},i(f){_||(C(t.$$.fragment,f),C(h),_=!0)},o(f){S(t.$$.fragment,f),S(h),_=!1},d(f){f&&M(e),o&&o.d(),Z(t),h&&h.d(),m=!1,me(i)}}}function yl(a,e){return e.filter(l);function l(n){var t=-1;return a.split(`
`).every(r);function r(c){if(!c)return!0;var _=c.split(n).length;return t<0&&(t=_),t===_&&_>1}}}function vl(a){const e=atob(a.split(",")[1]),l=a.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),t=new Uint8Array(n);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return new Blob([n],{type:l})}function Al(a,e,l){let{datatype:n}=e,{label:t=null}=e,{headers:r=[]}=e,{values:c=[[]]}=e,{col_count:_}=e,{row_count:m}=e,{editable:i=!0}=e,{wrap:o=!1}=e;const j=He();let u=!1,h=!1,f={};function A(s){let d=s||[];if(_[1]==="fixed"&&d.length<_[0]){const y=Array(_[0]-d.length).fill("").map((v,D)=>`${D+d.length}`);d=d.concat(y)}return!d||d.length===0?Array(_[0]).fill(0).map((y,v)=>{const D=`h-${v}`;return l(10,f[D]={cell:null,input:null},f),{id:D,value:JSON.stringify(v+1)}}):d.map((y,v)=>{const D=`h-${v}`;return l(10,f[D]={cell:null,input:null},f),{id:D,value:y??""}})}function F(s){const d=s.length>0?s.length:m[0];return Array(m[1]==="fixed"||d<m[0]?m[0]:d).fill(0).map((y,v)=>Array(_[1]==="fixed"?_[0]:s[0].length).fill(0).map((D,O)=>{const J=`${v}-${O}`;return l(10,f[J]={input:null,cell:null},f),{value:s?.[v]?.[O]??"",id:J}}))}let b=A(r),k;async function p(){typeof u=="string"?(await U(),f[u]?.input?.focus()):typeof h=="string"&&(await U(),f[h]?.input?.focus())}let w=[[]],T;function N(s,d,y){if(!d)return"none";if(r[d]===s){if(y==="asc")return"ascending";if(y==="des")return"descending"}}function z(s){return w.reduce((d,y,v)=>{const D=y.reduce((O,J,ue)=>s===J.id?ue:O,-1);return D===-1?d:[v,D]},[-1,-1])}async function R(s,d){if(!i||u===s)return;if(d){const[v,D]=z(s);l(9,w[v][D].value="",w)}l(6,u=s),await U();const{input:y}=f[s];y?.focus()}async function P(s,d,y,v){let D;switch(s.key){case"ArrowRight":if(u)break;s.preventDefault(),D=w[d][y+1],l(7,h=D?D.id:h);break;case"ArrowLeft":if(u)break;s.preventDefault(),D=w[d][y-1],l(7,h=D?D.id:h);break;case"ArrowDown":if(u)break;s.preventDefault(),D=w[d+1],l(7,h=D?D[y].id:h);break;case"ArrowUp":if(u)break;s.preventDefault(),D=w[d-1],l(7,h=D?D[y].id:h);break;case"Escape":if(!i)break;s.preventDefault(),l(7,h=u),l(6,u=!1);break;case"Enter":if(!i)break;if(s.preventDefault(),s.shiftKey){re(d),await U();const[al]=z(v);l(7,h=w[al+1][y].id)}else u===v?l(6,u=!1):R(v);break;case"Backspace":if(!i)break;u||(s.preventDefault(),l(9,w[d][y].value="",w));break;case"Delete":if(!i)break;u||(s.preventDefault(),l(9,w[d][y].value="",w));break;case"Tab":let O=s.shiftKey?-1:1,J=w[d][y+O],ue=w?.[d+O]?.[O>0?0:b.length-1],fe=J||ue;fe&&(s.preventDefault(),l(7,h=fe?fe.id:h)),l(6,u=!1);break;default:(!u||u&&u!==v)&&s.key.length===1&&R(v,!0);break}}async function pe(s){u!==s&&h!==s&&(l(6,u=!1),l(7,h=s))}async function we(s,d){if(d==="edit"&&typeof s=="string"&&(await U(),f[s].input?.focus()),d==="edit"&&typeof s=="boolean"&&typeof h=="string"){let y=f[h]?.cell;await U(),y?.focus()}if(d==="select"&&typeof s=="string"){const{cell:y}=f[s];await U(),y?.focus()}}let Y,ee;function Ue(s,d){d==="asc"?l(9,w=w.sort((y,v)=>y[s].value<v[s].value?-1:1)):d==="des"&&l(9,w=w.sort((y,v)=>y[s].value>v[s].value?-1:1))}function ke(s){typeof ee!="number"||ee!==s?(l(11,Y="asc"),l(12,ee=s)):Y==="asc"?l(11,Y="des"):Y==="des"&&l(11,Y="asc"),Ue(s,Y)}let H;function ye(){if(typeof h=="string"){const s=f[h].input?.value;if(b.find(d=>d.id===h)){let d=b.find(y=>y.id===h);s&&(d.value=s)}else s&&b.push({id:h,value:s})}}async function se(s,d){!i||_[1]!=="dynamic"||u===s||(l(13,H=s),await U(),f[s].input?.focus(),d&&f[s].input?.select())}function Ie(s){if(i)switch(s.key){case"Escape":case"Enter":case"Tab":s.preventDefault(),l(7,h=H),l(13,H=!1),ye();break}}function re(s){m[1]==="dynamic"&&(w.splice(s?s+1:w.length,0,Array(w[0].length).fill(0).map((d,y)=>{const v=`${w.length}-${y}`;return l(10,f[v]={cell:null,input:null},f),{id:v,value:""}})),l(9,w),l(27,c),l(29,T),l(26,r))}async function Ke(){if(_[1]!=="dynamic")return;for(let d=0;d<w.length;d++){const y=`${d}-${w[d].length}`;l(10,f[y]={cell:null,input:null},f),w[d].push({id:y,value:""})}const s=`h-${b.length}`;l(10,f[s]={cell:null,input:null},f),b.push({id:s,value:`Header ${b.length+1}`}),l(9,w),l(27,c),l(29,T),l(26,r),l(8,b),l(26,r),l(28,k),l(27,c),await U(),se(s,!0)}function Je(s){typeof u=="string"&&f[u]&&f[u].cell!==s.target&&!f[u].cell?.contains(s?.target)&&l(6,u=!1),typeof H=="string"&&f[H]&&f[H].cell!==s.target&&!f[H].cell?.contains(s.target)&&(l(7,h=H),l(13,H=!1),ye(),l(13,H=!1))}function ve(s){const d=new FileReader;function y(v){if(!v?.target?.result||typeof v.target.result!="string")return;const[D]=yl(v.target.result,[",","	"]),[O,...J]=_l(D).parseRows(v.target.result);l(8,b=A(_[1]==="fixed"?O.slice(0,_[0]):O)),l(27,c=J),d.removeEventListener("loadend",y)}d.addEventListener("loadend",y),d.readAsText(s)}let ie=!1;function Pe(s,d){a.$$.not_equal(f[d].input,s)&&(f[d].input=s,l(10,f))}const Ye=s=>se(s),Ge=s=>ke(s);function Ve(s,d){G[s?"unshift":"push"](()=>{f[d].cell=s,l(10,f)})}function We(s,d,y,v){y[v].value=s,l(9,w),l(27,c),l(29,T),l(26,r)}function Ze(s,d){a.$$.not_equal(f[d].input,s)&&(f[d].input=s,l(10,f))}function Qe(s,d){G[s?"unshift":"push"](()=>{f[d].cell=s,l(10,f)})}const Xe=s=>R(s),xe=s=>pe(s),$e=s=>R(s),el=(s,d,y,v)=>P(v,s,d,y);function ll(s){ie=s,l(14,ie)}const tl=s=>ve(vl(s.detail.data)),nl=()=>re();return a.$$set=s=>{"datatype"in s&&l(0,n=s.datatype),"label"in s&&l(1,t=s.label),"headers"in s&&l(26,r=s.headers),"values"in s&&l(27,c=s.values),"col_count"in s&&l(2,_=s.col_count),"row_count"in s&&l(3,m=s.row_count),"editable"in s&&l(4,i=s.editable),"wrap"in s&&l(5,o=s.wrap)},a.$$.update=()=>{if(a.$$.dirty[0]&201326592&&(c&&!Array.isArray(c)?(l(26,r=c.headers),l(27,c=c.data.length===0?[Array(r.length).fill("")]:c.data)):c===null?l(27,c=[Array(r.length).fill("")]):(l(27,c),l(26,r))),a.$$.dirty[0]&671088640&&(ae(c,T)||(l(9,w=F(c)),l(29,T=c),p())),a.$$.dirty[0]&640&&h!==!1){const s=h.split("-"),d=parseInt(s[0]),y=parseInt(s[1]);j("select",{index:[d,y],value:w[d][y].value})}a.$$.dirty[0]&335544320&&(ae(r,k)||(l(8,b=A(r)),l(28,k=r),p())),a.$$.dirty[0]&768&&b&&j("change",{data:w.map(s=>s.map(({value:d})=>d)),headers:b.map(s=>s.value)}),a.$$.dirty[0]&64&&we(u,"edit"),a.$$.dirty[0]&128&&we(h,"select")},[n,t,_,m,i,o,u,h,b,w,f,Y,ee,H,ie,N,R,P,pe,ke,se,Ie,re,Ke,Je,ve,r,c,k,T,Pe,Ye,Ge,Ve,We,Ze,Qe,Xe,xe,$e,el,ll,tl,nl]}class jl extends de{constructor(e){super(),he(this,e,Al,kl,ge,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function Dl(a){let e,l,n,t,r,c;const _=[a[11]];let m={};for(let i=0;i<_.length;i+=1)m=il(m,_[i]);return l=new ul({props:m}),t=new jl({props:{label:a[8],row_count:a[7],col_count:a[6],values:a[0],headers:a[1],editable:a[5]==="dynamic",wrap:a[9],datatype:a[10]}}),t.$on("change",a[13]),t.$on("select",a[14]),{c(){e=q("div"),V(l.$$.fragment),n=K(),V(t.$$.fragment),g(e,"id",a[2]),g(e,"class",r=Ae(a[3].join(" "))+" svelte-1nw9bhs"),E(e,"hide",!a[4])},m(i,o){B(i,e,o),W(l,e,null),L(e,n),W(t,e,null),c=!0},p(i,[o]){const j=o&2048?fl(_,[ol(i[11])]):{};l.$set(j);const u={};o&256&&(u.label=i[8]),o&128&&(u.row_count=i[7]),o&64&&(u.col_count=i[6]),o&1&&(u.values=i[0]),o&2&&(u.headers=i[1]),o&32&&(u.editable=i[5]==="dynamic"),o&512&&(u.wrap=i[9]),o&1024&&(u.datatype=i[10]),t.$set(u),(!c||o&4)&&g(e,"id",i[2]),(!c||o&8&&r!==(r=Ae(i[3].join(" "))+" svelte-1nw9bhs"))&&g(e,"class",r),(!c||o&24)&&E(e,"hide",!i[4])},i(i){c||(C(l.$$.fragment,i),C(t.$$.fragment,i),c=!0)},o(i){S(l.$$.fragment,i),S(t.$$.fragment,i),c=!1},d(i){i&&M(e),Z(l),Z(t)}}}function El(a,e,l){let{headers:n=[]}=e,{elem_id:t=""}=e,{elem_classes:r=[]}=e,{visible:c=!0}=e,{value:_={data:[["","",""]],headers:["1","2","3"]}}=e,{mode:m}=e,{col_count:i}=e,{row_count:o}=e,{label:j=null}=e,{wrap:u}=e,{datatype:h}=e;const f=He();let{loading_status:A}=e;async function F(p){l(0,_=p),await U(),f("change",p)}const b=({detail:p})=>F(p);function k(p){oe.call(this,a,p)}return a.$$set=p=>{"headers"in p&&l(1,n=p.headers),"elem_id"in p&&l(2,t=p.elem_id),"elem_classes"in p&&l(3,r=p.elem_classes),"visible"in p&&l(4,c=p.visible),"value"in p&&l(0,_=p.value),"mode"in p&&l(5,m=p.mode),"col_count"in p&&l(6,i=p.col_count),"row_count"in p&&l(7,o=p.row_count),"label"in p&&l(8,j=p.label),"wrap"in p&&l(9,u=p.wrap),"datatype"in p&&l(10,h=p.datatype),"loading_status"in p&&l(11,A=p.loading_status)},[_,n,t,r,c,m,i,o,j,u,h,A,F,b,k]}class Ll extends de{constructor(e){super(),he(this,e,El,Dl,ge,{headers:1,elem_id:2,elem_classes:3,visible:4,value:0,mode:5,col_count:6,row_count:7,label:8,wrap:9,datatype:10,loading_status:11})}}const Rl=Ll,Sl=["static","dynamic"],zl=a=>({type:{payload:"{ data: Array<Array<string | number>>; headers: Array<string> }"},description:{payload:"an object with an array of data and an array of headers"},example_data:a.value});export{Rl as Component,zl as document,Sl as modes};
//# sourceMappingURL=index-9922db9d.js.map
