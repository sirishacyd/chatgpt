{"version":3,"file":"ModifyUpload.svelte_svelte_type_style_lang-886b042e.js","sources":["../../../../js/upload/src/utils.ts"],"sourcesContent":["import type { FileData } from \"./types\";\n\nexport function normalise_file(\n\tfile: string | FileData | null,\n\troot: string,\n\troot_url: string | null\n): FileData | null;\nexport function normalise_file(\n\tfile: Array<FileData> | FileData | null,\n\troot: string,\n\troot_url: string | null\n): Array<FileData> | FileData | null;\n\nexport function normalise_file(\n\tfile: string | FileData | Array<FileData> | null,\n\troot: string,\n\troot_url: string | null\n): FileData | Array<FileData> | null {\n\tif (file == null) return null;\n\tif (typeof file === \"string\") {\n\t\treturn {\n\t\t\tname: \"file_data\",\n\t\t\tdata: file\n\t\t};\n\t} else if (Array.isArray(file)) {\n\t\tfor (const x of file) {\n\t\t\tnormalise_file(x, root, root_url);\n\t\t}\n\t} else if (file.is_file) {\n\t\tif (root_url == null) {\n\t\t\tfile.data = root + \"/file=\" + file.name;\n\t\t} else {\n\t\t\tfile.data = \"/proxy=\" + root_url + \"/file=\" + file.name;\n\t\t}\n\t}\n\treturn file;\n}\n\nexport const blobToBase64 = (blob: File): Promise<string> => {\n\tconst reader = new FileReader();\n\treader.readAsDataURL(blob);\n\treturn new Promise((resolve) => {\n\t\treader.onloadend = () => {\n\t\t\tresolve(reader.result as string);\n\t\t};\n\t});\n};\n"],"names":["normalise_file","file","root","root_url","x","blobToBase64","blob","reader","resolve"],"mappings":"AAagB,SAAAA,EACfC,EACAC,EACAC,EACoC,CACpC,GAAIF,GAAQ,KAAa,OAAA,KACrB,GAAA,OAAOA,GAAS,SACZ,MAAA,CACN,KAAM,YACN,KAAMA,CAAA,EAEG,GAAA,MAAM,QAAQA,CAAI,EAC5B,UAAWG,KAAKH,EACAD,EAAAI,EAAGF,EAAMC,CAAQ,OAEvBF,EAAK,UACXE,GAAY,KACVF,EAAA,KAAOC,EAAO,SAAWD,EAAK,KAEnCA,EAAK,KAAO,UAAYE,EAAW,SAAWF,EAAK,MAG9C,OAAAA,CACR,CAEa,MAAAI,EAAgBC,GAAgC,CACtD,MAAAC,EAAS,IAAI,WACnB,OAAAA,EAAO,cAAcD,CAAI,EAClB,IAAI,QAASE,GAAY,CAC/BD,EAAO,UAAY,IAAM,CACxBC,EAAQD,EAAO,MAAgB,CAAA,CAChC,CACA,CACF"}